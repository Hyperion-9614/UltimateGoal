language: android

os:
  - linux

dist: focal

android:
  components:
    - build-tools-30.0.3
    - build-tools-29.0.3
    - tools
    - platform-tools
    - extra-google-m2repository
    - extra-android-m2repository
    - android-29
    - android-30

install:
  - echo y | sdkmanager "ndk-bundle" --channel=3

before_install:
  - cd ..
  - sudo apt-get update || echo "Some packages could not be built properly"
  - sudo apt-get install build-essential
  - sudo apt-get install g++
  - wget https://github.com/Kitware/CMake/releases/download/v3.19.8/cmake-3.19.8.tar.gz
  - tar -zxvf cmake-3.19.8.tar.gz
  - cd cmake-3.19.8
  - ./bootstrap --parallel=8
  - make -j8
  - sudo make install
#  - echo 'export PATH=`pwd`:$PATH' >> ~/.bashrc
  - pwd
  - cd ..
  - cd UltimateGoal
  - chmod +x gradlew
  - mkdir -p .android && touch ~/.android/repositories.cfg

script:
  - ./gradlew build connectedCheck
